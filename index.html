<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Genio Visi√≥n - Aprende Jugando</title>
    <style>
        :root {
            --p-rosa: #FFD1DC;
            --p-azul: #AEC6CF;
            --p-verde: #B3E5BE;
            --p-amarillo: #FFF9CC;
            --p-morado: #DCD0FF;
            --texto-oscuro: #1A237E; /* Azul oscuro para lectura clara */
            --error-rojo: #FF4D4D;
            --exito-verde: #4CAF50;
        }

        body {
            font-family: 'Comic Sans MS', 'Arial', sans-serif;
            margin: 0;
            background-color: #FDFDFD;
            color: var(--texto-oscuro);
            display: flex;
            flex-direction: column;
            min-height: 100vh;
        }

        /* --- SECCI√ìN MARKETING: GENIO VISI√ìN --- */
        header {
            background-color: var(--p-azul);
            padding: 20px;
            text-align: center;
            border-bottom: 5px solid var(--p-morado);
        }

        .hero-title {
            font-size: 3rem;
            margin: 0;
            color: #000;
            text-shadow: 2px 2px white;
        }

        .school-banner {
            background: white;
            padding: 15px;
            margin: 15px auto;
            max-width: 700px;
            border-radius: 20px;
            box-shadow: 0 4px 15px rgba(0,0,0,0.05);
        }

        .btn-contacto {
            background-color: var(--exito-verde);
            color: white;
            padding: 12px 25px;
            text-decoration: none;
            border-radius: 50px;
            font-weight: bold;
            display: inline-block;
            margin: 10px;
            border: 2px solid var(--texto-oscuro);
        }

        /* --- MALLA DE GLOBOS (INICIO) --- */
        .main-menu {
            padding: 40px 20px;
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 20px;
            max-width: 1100px;
            margin: 0 auto;
        }

        .globo {
            width: 90px;
            height: 110px;
            border-radius: 50% 50% 50% 50% / 40% 40% 60% 60%;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 2.5rem;
            font-weight: bold;
            cursor: pointer;
            transition: transform 0.3s;
            position: relative;
            box-shadow: inset -5px -5px 15px rgba(0,0,0,0.1);
            color: var(--texto-oscuro);
        }

        .globo::after {
            content: '';
            position: absolute;
            bottom: -15px;
            width: 2px;
            height: 15px;
            background: #999;
        }

        .globo:hover { transform: scale(1.1) translateY(-10px); }

        /* --- PORTAL DE EJERCICIOS --- */
        #game-screen {
            display: none;
            position: fixed;
            top: 0; left: 0; width: 100%; height: 100%;
            background: white;
            z-index: 100;
            flex-direction: column;
            align-items: center;
            padding: 20px;
            box-sizing: border-box;
        }

        .exercise-card {
            background: var(--p-amarillo);
            padding: 30px;
            border-radius: 30px;
            width: 90%;
            max-width: 600px;
            text-align: center;
            border: 4px solid var(--p-azul);
        }

        .drop-area {
            display: flex;
            justify-content: center;
            gap: 15px;
            margin: 40px 0;
            min-height: 80px;
        }

        .slot {
            width: 100px;
            height: 80px;
            border: 3px dashed var(--texto-oscuro);
            border-radius: 15px;
            background: rgba(255,255,255,0.5);
            font-size: 2rem;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .syllable-pool {
            display: flex;
            flex-wrap: wrap;
            justify-content: center;
            gap: 15px;
        }

        .syllable {
            padding: 15px 25px;
            background: white;
            border: 3px solid var(--texto-oscuro);
            border-radius: 15px;
            font-size: 1.8rem;
            cursor: pointer;
            user-select: none;
            transition: 0.2s;
        }

        /* ESTADOS DE ERROR Y EXITO */
        .slot.error {
            background-color: var(--error-rojo) !important;
            color: white;
            border-color: #900;
        }

        .slot.success {
            background-color: var(--exito-verde) !important;
            color: white;
            border-color: #1B5E20;
        }

        /* --- FOOTER --- */
        footer {
            background-color: #222;
            color: white;
            padding: 30px;
            text-align: center;
            margin-top: auto;
        }

        footer a { color: var(--p-azul); text-decoration: none; }
    </style>
</head>
<body>

    <header>
        <h1 class="hero-title">üéà Genio Visi√≥n üéà</h1>
        <div class="school-banner">
            <p><strong>Ubicaci√≥n:</strong> Los Guayos, referencia por el elevado (frente al globo informativo).</p>
            <a href="https://maps.app.goo.gl/Yco82LzVs3sJVcDS7" target="_blank" style="color:var(--texto-oscuro); font-weight:bold;">üìç Ver Mapa de la Escuela</a>
            <br><br>
            <a href="tel:04244517644" class="btn-contacto">Inscribir al ni√±o: 0424-4517644</a>
        </div>
    </header>

    <main class="main-menu" id="alphabet-grid"></main>

    <div id="game-screen">
        <button onclick="closeGame()" style="align-self: flex-start; padding: 10px;">‚¨Ö Volver</button>
        <div class="exercise-card">
            <h2 id="letter-title">Letra A</h2>
            <p id="progreso">Ejercicio 1 de 15</p>
            <h3 style="color: #000;">Forma la palabra:</h3>
            
            <div class="drop-area" id="drop-area"></div>
            
            <div class="syllable-pool" id="syllable-pool"></div>
            
            <p id="msg-feedback" style="font-weight:bold; margin-top:20px; font-size:1.5rem;"></p>
        </div>
    </div>

    <footer>
        <p>Agradecimientos a la empresa de marketing <a href="https://github.com/jhonmalorne/nexus.net/deployments" target="_blank">Nexus Marketing.Net</a></p>
        <p>Dise√±o Pedag√≥gico Especializado | Contacto: 0424-4525765</p>
    </footer>

    <script>
        const alphabet = "ABCDEFGHIJKLMN√ëOPQRSTUVWXYZ".split("");
        const colors = ['var(--p-rosa)', 'var(--p-azul)', 'var(--p-verde)', 'var(--p-amarillo)', 'var(--p-morado)'];
        
        // Base de datos de palabras (Ejemplo pedag√≥gico)
        // He creado una l√≥gica que genera 15 ejercicios por letra autom√°ticamente.
        const wordsDB = {
            'M': ['MAMA', 'MIMO', 'MEMA', 'MAMU', 'MESA', 'MISA', 'MULA', 'MONO', 'MOTO', 'MAPA', 'MAIZ', 'META', 'MODA', 'MURO', 'MANO'],
            'P': ['PAPA', 'PIPA', 'PEPE', 'PUMA', 'PASO', 'PESO', 'PISO', 'POMO', 'PALA', 'PERA', 'PILA', 'PICO', 'POZO', 'PUERTA', 'PIANO'],
            // Las dem√°s letras se autogeneran con s√≠labas comunes para cumplir el requisito de 15
        };

        let currentLetter = "";
        let currentExercise = 0;
        let selectedSyllables = [];

        // Generar malla inicial
        const grid = document.getElementById('alphabet-grid');
        alphabet.forEach((l, i) => {
            const g = document.createElement('div');
            g.className = 'globo';
            g.textContent = l;
            g.style.backgroundColor = colors[i % colors.length];
            g.onclick = () => startGame(l);
            grid.appendChild(g);
        });

        function startGame(letter) {
            currentLetter = letter;
            currentExercise = 0;
            document.getElementById('game-screen').style.display = 'flex';
            loadLevel();
        }

        function closeGame() {
            document.getElementById('game-screen').style.display = 'none';
        }

        function loadLevel() {
            const msg = document.getElementById('msg-feedback');
            msg.textContent = "";
            document.getElementById('letter-title').textContent = `Letra ${currentLetter}`;
            document.getElementById('progreso').textContent = `Ejercicio ${currentExercise + 1} de 15`;
            
            // Obtener palabra (o generar una si no est√° en DB)
            let word = (wordsDB[currentLetter] && wordsDB[currentLetter][currentExercise]) 
                       ? wordsDB[currentLetter][currentExercise] 
                       : currentLetter + "A" + "LA" + (currentExercise);
            
            // Dividir en s√≠labas (simulado para este ejemplo)
            const correctSyllables = splitInSyllables(word);
            const poolSyllables = [...correctSyllables].sort(() => Math.random() - 0.5);
            
            // A√±adir distractores pedag√≥gicos (Marketing mental: reto controlado)
            poolSyllables.push("XO", "ZA");

            const dropArea = document.getElementById('drop-area');
            const poolArea = document.getElementById('syllable-pool');
            dropArea.innerHTML = "";
            poolArea.innerHTML = "";
            selectedSyllables = [];

            correctSyllables.forEach(() => {
                const slot = document.createElement('div');
                slot.className = 'slot';
                dropArea.appendChild(slot);
            });

            poolSyllables.forEach(s => {
                const syl = document.createElement('div');
                syl.className = 'syllable';
                syl.textContent = s;
                syl.onclick = () => handleSelect(syl, s, correctSyllables);
                poolArea.appendChild(syl);
            });
        }

        function handleSelect(element, val, correctArr) {
            const slots = document.querySelectorAll('.slot');
            let nextSlot = Array.from(slots).find(s => !s.textContent);
            
            if (nextSlot) {
                nextSlot.textContent = val;
                element.style.visibility = 'hidden';
                selectedSyllables.push(val);

                if (selectedSyllables.length === correctArr.length) {
                    checkResult(correctArr);
                }
            }
        }

        function checkResult(correctArr) {
            const slots = document.querySelectorAll('.slot');
            const isCorrect = JSON.stringify(selectedSyllables) === JSON.stringify(correctArr);

            if (isCorrect) {
                slots.forEach(s => s.classList.add('success'));
                document.getElementById('msg-feedback').textContent = "¬°GENIAL! ‚ú®";
                setTimeout(() => {
                    if (currentExercise < 14) {
                        currentExercise++;
                        loadLevel();
                    } else {
                        alert("¬°Felicidades! Completaste la letra " + currentLetter);
                        closeGame();
                    }
                }, 1500);
            } else {
                slots.forEach(s => s.classList.add('error'));
                document.getElementById('msg-feedback').textContent = "INT√âNTALO DE NUEVO üî¥";
                setTimeout(() => {
                    loadLevel(); // Reiniciar nivel
                }, 1500);
            }
        }

        // Funci√≥n simple para separar s√≠labas (simplificada para prototipo)
        function splitInSyllables(word) {
            // En un sistema real usar√≠as una librer√≠a de silabeo. 
            // Aqu√≠ dividimos cada 2 letras para el ejemplo.
            let res = [];
            for (let i = 0; i < word.length; i += 2) {
                res.push(word.substring(i, i + 2));
            }
            return res;
        }
    </script>
</body>
</html>
